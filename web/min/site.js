window.app={},app.immediate=function(){"use strict";return{init:{init:function(){document.querySelector("html").classList.add("js")}}.init}}(app),app.immediate.init();
app.global=function(){"use strict";var e={init:function(){e.header(),e.imageLoad()},header:function(){var e=document.querySelector("body"),t=0,n=document.querySelector("body > header");window.addEventListener("scroll",function(){!e.classList.contains("hidden-header")&&t>e.getBoundingClientRect().top&&Math.abs(e.getBoundingClientRect().top)>n.getBoundingClientRect().height?e.classList.add("hidden-header"):(e.getBoundingClientRect().top-10>=t||Math.abs(e.getBoundingClientRect().top)<=n.getBoundingClientRect().height)&&e.classList.remove("hidden-header"),t=e.getBoundingClientRect().top})},imageLoad:function(){var t=function(){const n=document.querySelectorAll("img[data-src]:not(.loaded)");n.length?n.forEach(function(t){let n;n=document.body.clientWidth<768?t.clientWidth?"w_"+t.clientWidth:"h_"+t.clientHeight:t.clientHeight?"h_"+t.clientHeight:"w_"+t.clientWidth,t.getBoundingClientRect().top<1.5*document.body.clientHeight&&(t.src=t.dataset.src.replace("[parameters]","f_auto,q_80,"+n+",dpr_"+Math.ceil(window.devicePixelRatio)+".0"),t.classList.add("loaded"),"FIGURE"===t.parentNode.parentNode.tagName&&e.imageZoom(t))}):window.removeEventListener("scroll",t)};t(),window.addEventListener("scroll",t)},imageZoom:function(e){var t=document.getElementById("mask")||document.createElement("div"),n=e.parentNode,i=document.createElement("img"),a=e.dataset.src.replace("[parameters]","f_auto,q_80,dpr_"+Math.ceil(window.devicePixelRatio)+".0");t.setAttribute("id","mask"),document.body.appendChild(t),n.addEventListener("click",function(o){o.preventDefault();let r=e.parentNode.parentNode.parentNode.parentNode,d=Array.prototype.slice.call(r.querySelector("section").children).indexOf(n.parentNode);if(t.innerHTML='<a id="mask-open-tab" href="'+a+'" target="_blank">Open this image in a new tab</a><a id="mask-close" href="#">Close</a>',"group"===r.getAttribute("role")){t.innerHTML+='<nav id="screen-nav"><ul></ul></nav>';let e=t.querySelector("#screen-nav");r.querySelectorAll("figure").forEach(function(n,a){e.querySelector("ul").innerHTML+="<li"+(a===d?' class="selected"':"")+'><a href="'+n.querySelector("img").dataset.src.replace("[parameters]","f_auto,q_80,dpr_"+Math.ceil(window.devicePixelRatio)+".0")+'">'+n.querySelector("img").getAttribute("alt")+"</a></li>",e.addEventListener("click",function(n){n.preventDefault(),"A"===n.target.tagName&&(e.querySelectorAll("li").forEach(function(e){e.classList.remove("selected")}),n.target.parentNode.classList.add("selected"),t.querySelector("#mask-open-tab").setAttribute("href",n.target.href),i.setAttribute("src",n.target.href))})})}function c(e){"Escape"===e.key&&l()}function l(){document.querySelector("html").classList.remove("mask-enabled"),t.classList.remove("enabled","loading"),t.innerHTML="",window.removeEventListener("keydown",c)}document.querySelector("html").classList.add("mask-enabled"),t.classList.add("enabled"),i.setAttribute("src",a),t.append(i),setTimeout(function(){0===i.naturalWidth&&(t.classList.add("loading"),setTimeout(function(){t.classList.remove("loading")},1e4))},500),window.addEventListener("keydown",c),t.querySelector("#mask-close").addEventListener("click",function(e){e.preventDefault(),l()})})}};return{init:e.init,imageZoom:e.imageZoom}}(app);
app.init=function(){"use strict";var t=document.body,a=t.getAttribute("data-controller"),e=t.getAttribute("data-action"),p=t.getAttribute("data-view");app.global.init(),app[a]&&(app[a].init(),app[a][e]&&"function"==typeof app[a][e]&&(app[a][e](),app[a][e][p]&&app[a][e][p]()))},document.onreadystatechange=function(){"use strict";"interactive"===document.readyState&&app.init()};
//# sourceMappingURL=../min/site.js.map
